import { Directive, } from '@angular/core';
import { RxDefaultListViewContext } from '@rx-angular/cdk/template';
import { of, Subject } from 'rxjs';
import * as i0 from "@angular/core";
/**
 * @Directive RxVirtualScrollStrategy
 *
 * @description
 * Abstract implementation for the actual implementations of the ScrollStrategies
 * being consumed by `*rxVirtualFor` and `rx-virtual-scroll-viewport`.
 *
 * This is one of the core parts for the virtual scrolling implementation. It has
 * to determine the `ListRange` being rendered to the DOM as well as managing
 * the layouting task for the `*rxVirtualFor` directive.
 *
 * @docsCategory RxVirtualFor
 * @docsPage RxVirtualFor
 * @publicApi
 */
export class RxVirtualScrollStrategy {
    /** @internal */
    get isStable() {
        return of(true);
    }
    /**
     * @description
     *
     * Emits whenever an update to a single view was rendered
     */
    viewRenderCallback = new Subject();
    /** @internal */
    nodeIndex;
    /** @internal */
    getElement(view) {
        if (this.nodeIndex !== undefined) {
            return view.rootNodes[this.nodeIndex];
        }
        const rootNode = view.rootNodes[0];
        this.nodeIndex = rootNode instanceof HTMLElement ? 0 : 1;
        return view.rootNodes[this.nodeIndex];
    }
    /** @nocollapse */ static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.0.1", ngImport: i0, type: RxVirtualScrollStrategy, deps: [], target: i0.ɵɵFactoryTarget.Directive });
    /** @nocollapse */ static ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "18.0.1", type: RxVirtualScrollStrategy, ngImport: i0 });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.0.1", ngImport: i0, type: RxVirtualScrollStrategy, decorators: [{
            type: Directive
        }] });
/** @internal */
export class RxVirtualScrollViewport {
    /** @nocollapse */ static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.0.1", ngImport: i0, type: RxVirtualScrollViewport, deps: [], target: i0.ɵɵFactoryTarget.Directive });
    /** @nocollapse */ static ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "18.0.1", type: RxVirtualScrollViewport, ngImport: i0 });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.0.1", ngImport: i0, type: RxVirtualScrollViewport, decorators: [{
            type: Directive
        }] });
/** @internal */
export class RxVirtualViewRepeater {
    _trackBy;
    /** @nocollapse */ static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.0.1", ngImport: i0, type: RxVirtualViewRepeater, deps: [], target: i0.ɵɵFactoryTarget.Directive });
    /** @nocollapse */ static ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "18.0.1", type: RxVirtualViewRepeater, ngImport: i0 });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.0.1", ngImport: i0, type: RxVirtualViewRepeater, decorators: [{
            type: Directive
        }] });
/** @internal */
export class RxVirtualForViewContext extends RxDefaultListViewContext {
    rxVirtualForOf;
    constructor(item, rxVirtualForOf, customProps) {
        super(item, customProps);
        this.rxVirtualForOf = rxVirtualForOf;
    }
}
export class RxVirtualScrollElement {
    /** @nocollapse */ static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.0.1", ngImport: i0, type: RxVirtualScrollElement, deps: [], target: i0.ɵɵFactoryTarget.Directive });
    /** @nocollapse */ static ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "18.0.1", type: RxVirtualScrollElement, ngImport: i0 });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.0.1", ngImport: i0, type: RxVirtualScrollElement, decorators: [{
            type: Directive
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL3RlbXBsYXRlL2V4cGVyaW1lbnRhbC92aXJ0dWFsLXNjcm9sbGluZy9zcmMvbGliL21vZGVsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxTQUFTLEdBT1YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDcEUsT0FBTyxFQUFjLEVBQUUsRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7O0FBMEIvQzs7Ozs7Ozs7Ozs7Ozs7R0FjRztBQUVILE1BQU0sT0FBZ0IsdUJBQXVCO0lBVzNDLGdCQUFnQjtJQUNoQixJQUFJLFFBQVE7UUFDVixPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNsQixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNNLGtCQUFrQixHQUFHLElBQUksT0FBTyxFQUlyQyxDQUFDO0lBRUwsZ0JBQWdCO0lBQ1IsU0FBUyxDQUFVO0lBRTNCLGdCQUFnQjtJQUNOLFVBQVUsQ0FDbEIsSUFBb0Q7UUFFcEQsSUFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLFNBQVMsRUFBRSxDQUFDO1lBQ2pDLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDeEMsQ0FBQztRQUNELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkMsSUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLFlBQVksV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6RCxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBZ0IsQ0FBQztJQUN2RCxDQUFDOzBIQXhDbUIsdUJBQXVCOzhHQUF2Qix1QkFBdUI7OzJGQUF2Qix1QkFBdUI7a0JBRDVDLFNBQVM7O0FBZ0VWLGdCQUFnQjtBQUVoQixNQUFNLE9BQWdCLHVCQUF1QjswSEFBdkIsdUJBQXVCOzhHQUF2Qix1QkFBdUI7OzJGQUF2Qix1QkFBdUI7a0JBRDVDLFNBQVM7O0FBVVYsZ0JBQWdCO0FBRWhCLE1BQU0sT0FBZ0IscUJBQXFCO0lBZXpDLFFBQVEsQ0FBNEI7MEhBZmhCLHFCQUFxQjs4R0FBckIscUJBQXFCOzsyRkFBckIscUJBQXFCO2tCQUQxQyxTQUFTOztBQW1CVixnQkFBZ0I7QUFDaEIsTUFBTSxPQUFPLHVCQUtYLFNBQVEsd0JBQWlDO0lBR2hDO0lBRlQsWUFDRSxJQUFPLEVBQ0EsY0FBaUIsRUFDeEIsV0FBZTtRQUVmLEtBQUssQ0FBQyxJQUFJLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFIbEIsbUJBQWMsR0FBZCxjQUFjLENBQUc7SUFJMUIsQ0FBQztDQUNGO0FBR0QsTUFBTSxPQUFnQixzQkFBc0I7MEhBQXRCLHNCQUFzQjs4R0FBdEIsc0JBQXNCOzsyRkFBdEIsc0JBQXNCO2tCQUQzQyxTQUFTIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgRGlyZWN0aXZlLFxuICBFbGVtZW50UmVmLFxuICBFbWJlZGRlZFZpZXdSZWYsXG4gIE5nSXRlcmFibGUsXG4gIFRlbXBsYXRlUmVmLFxuICBUcmFja0J5RnVuY3Rpb24sXG4gIFZpZXdDb250YWluZXJSZWYsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUnhEZWZhdWx0TGlzdFZpZXdDb250ZXh0IH0gZnJvbSAnQHJ4LWFuZ3VsYXIvY2RrL3RlbXBsYXRlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIG9mLCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5cbnR5cGUgQ3JlYXRlVmlld0NvbnRleHQ8SW1wbGljaXQsIENvbnRleHQsIENvbXB1dGVkQ29udGV4dD4gPSAoXG4gIHZhbHVlOiBJbXBsaWNpdCxcbiAgY29tcHV0ZWRDb250ZXh0OiBDb21wdXRlZENvbnRleHQsXG4pID0+IENvbnRleHQ7XG5cbnR5cGUgVXBkYXRlVmlld0NvbnRleHQ8SW1wbGljaXQsIENvbnRleHQsIENvbXB1dGVkQ29udGV4dD4gPSAoXG4gIHZhbHVlOiBJbXBsaWNpdCxcbiAgdmlldzogRW1iZWRkZWRWaWV3UmVmPENvbnRleHQ+LFxuICBjb21wdXRlZENvbnRleHQ/OiBDb21wdXRlZENvbnRleHQsXG4pID0+IHZvaWQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGVtcGxhdGVTZXR0aW5nczxJbXBsaWNpdCwgQ29udGV4dCwgQ29tcHV0ZWRDb250ZXh0PiB7XG4gIHZpZXdDb250YWluZXJSZWY6IFZpZXdDb250YWluZXJSZWY7XG4gIHRlbXBsYXRlUmVmOiBUZW1wbGF0ZVJlZjxDb250ZXh0PjtcbiAgY3JlYXRlVmlld0NvbnRleHQ6IENyZWF0ZVZpZXdDb250ZXh0PEltcGxpY2l0LCBDb250ZXh0LCBDb21wdXRlZENvbnRleHQ+O1xuICB1cGRhdGVWaWV3Q29udGV4dDogVXBkYXRlVmlld0NvbnRleHQ8SW1wbGljaXQsIENvbnRleHQsIENvbXB1dGVkQ29udGV4dD47XG4gIHRlbXBsYXRlQ2FjaGVTaXplOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGlzdFJhbmdlIHtcbiAgc3RhcnQ6IG51bWJlcjtcbiAgZW5kOiBudW1iZXI7XG59XG5cbi8qKlxuICogQERpcmVjdGl2ZSBSeFZpcnR1YWxTY3JvbGxTdHJhdGVneVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQWJzdHJhY3QgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBhY3R1YWwgaW1wbGVtZW50YXRpb25zIG9mIHRoZSBTY3JvbGxTdHJhdGVnaWVzXG4gKiBiZWluZyBjb25zdW1lZCBieSBgKnJ4VmlydHVhbEZvcmAgYW5kIGByeC12aXJ0dWFsLXNjcm9sbC12aWV3cG9ydGAuXG4gKlxuICogVGhpcyBpcyBvbmUgb2YgdGhlIGNvcmUgcGFydHMgZm9yIHRoZSB2aXJ0dWFsIHNjcm9sbGluZyBpbXBsZW1lbnRhdGlvbi4gSXQgaGFzXG4gKiB0byBkZXRlcm1pbmUgdGhlIGBMaXN0UmFuZ2VgIGJlaW5nIHJlbmRlcmVkIHRvIHRoZSBET00gYXMgd2VsbCBhcyBtYW5hZ2luZ1xuICogdGhlIGxheW91dGluZyB0YXNrIGZvciB0aGUgYCpyeFZpcnR1YWxGb3JgIGRpcmVjdGl2ZS5cbiAqXG4gKiBAZG9jc0NhdGVnb3J5IFJ4VmlydHVhbEZvclxuICogQGRvY3NQYWdlIFJ4VmlydHVhbEZvclxuICogQHB1YmxpY0FwaVxuICovXG5ARGlyZWN0aXZlKClcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSeFZpcnR1YWxTY3JvbGxTdHJhdGVneTxcbiAgVCxcbiAgVSBleHRlbmRzIE5nSXRlcmFibGU8VD4gPSBOZ0l0ZXJhYmxlPFQ+LFxuPiB7XG4gIC8qKiBFbWl0cyB3aGVuIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZWxlbWVudCB2aXNpYmxlIGluIHRoZSB2aWV3cG9ydCBjaGFuZ2VzLiAqL1xuICAvKiogQGludGVybmFsICovXG4gIGFic3RyYWN0IHNjcm9sbGVkSW5kZXgkOiBPYnNlcnZhYmxlPG51bWJlcj47XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgYWJzdHJhY3QgcmVuZGVyZWRSYW5nZSQ6IE9ic2VydmFibGU8TGlzdFJhbmdlPjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhYnN0cmFjdCBjb250ZW50U2l6ZSQ6IE9ic2VydmFibGU8bnVtYmVyPjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBnZXQgaXNTdGFibGUoKSB7XG4gICAgcmV0dXJuIG9mKHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBFbWl0cyB3aGVuZXZlciBhbiB1cGRhdGUgdG8gYSBzaW5nbGUgdmlldyB3YXMgcmVuZGVyZWRcbiAgICovXG4gIHJlYWRvbmx5IHZpZXdSZW5kZXJDYWxsYmFjayA9IG5ldyBTdWJqZWN0PHtcbiAgICB2aWV3OiBFbWJlZGRlZFZpZXdSZWY8UnhWaXJ0dWFsRm9yVmlld0NvbnRleHQ8VCwgVT4+O1xuICAgIGl0ZW06IFQ7XG4gICAgaW5kZXg6IG51bWJlcjtcbiAgfT4oKTtcblxuICAvKiogQGludGVybmFsICovXG4gIHByaXZhdGUgbm9kZUluZGV4PzogbnVtYmVyO1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHJvdGVjdGVkIGdldEVsZW1lbnQoXG4gICAgdmlldzogRW1iZWRkZWRWaWV3UmVmPFJ4VmlydHVhbEZvclZpZXdDb250ZXh0PFQsIFU+PixcbiAgKTogSFRNTEVsZW1lbnQge1xuICAgIGlmICh0aGlzLm5vZGVJbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdmlldy5yb290Tm9kZXNbdGhpcy5ub2RlSW5kZXhdO1xuICAgIH1cbiAgICBjb25zdCByb290Tm9kZSA9IHZpZXcucm9vdE5vZGVzWzBdO1xuICAgIHRoaXMubm9kZUluZGV4ID0gcm9vdE5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCA/IDAgOiAxO1xuICAgIHJldHVybiB2aWV3LnJvb3ROb2Rlc1t0aGlzLm5vZGVJbmRleF0gYXMgSFRNTEVsZW1lbnQ7XG4gIH1cblxuICAvKipcbiAgICogQXR0YWNoZXMgdGhpcyBzY3JvbGwgc3RyYXRlZ3kgdG8gYSB2aWV3cG9ydC5cbiAgICogQHBhcmFtIHZpZXdwb3J0IFRoZSB2aWV3cG9ydCB0byBhdHRhY2ggdGhpcyBzdHJhdGVneSB0by5cbiAgICogQHBhcmFtIHZpZXdSZXBlYXRlciBUaGUgdmlld1JlcGVhdGVyIGF0dGFjaGVkIHRvIHRoZSB2aWV3cG9ydC5cbiAgICovXG4gIGFic3RyYWN0IGF0dGFjaChcbiAgICB2aWV3cG9ydDogUnhWaXJ0dWFsU2Nyb2xsVmlld3BvcnQsXG4gICAgdmlld1JlcGVhdGVyOiBSeFZpcnR1YWxWaWV3UmVwZWF0ZXI8YW55PixcbiAgKTogdm9pZDtcblxuICAvKiogRGV0YWNoZXMgdGhpcyBzY3JvbGwgc3RyYXRlZ3kgZnJvbSB0aGUgY3VycmVudGx5IGF0dGFjaGVkIHZpZXdwb3J0LiAqL1xuICBhYnN0cmFjdCBkZXRhY2goKTogdm9pZDtcblxuICAvKipcbiAgICogU2Nyb2xsIHRvIHRoZSBvZmZzZXQgZm9yIHRoZSBnaXZlbiBpbmRleC5cbiAgICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCBvZiB0aGUgZWxlbWVudCB0byBzY3JvbGwgdG8uXG4gICAqIEBwYXJhbSBiZWhhdmlvciBUaGUgU2Nyb2xsQmVoYXZpb3IgdG8gdXNlIHdoZW4gc2Nyb2xsaW5nLlxuICAgKi9cbiAgYWJzdHJhY3Qgc2Nyb2xsVG9JbmRleChpbmRleDogbnVtYmVyLCBiZWhhdmlvcj86IFNjcm9sbEJlaGF2aW9yKTogdm9pZDtcbn1cblxuLyoqIEBpbnRlcm5hbCAqL1xuQERpcmVjdGl2ZSgpXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUnhWaXJ0dWFsU2Nyb2xsVmlld3BvcnQge1xuICBhYnN0cmFjdCBlbGVtZW50U2Nyb2xsZWQkOiBPYnNlcnZhYmxlPHZvaWQ+O1xuICBhYnN0cmFjdCBjb250YWluZXJSZWN0JDogT2JzZXJ2YWJsZTx7IGhlaWdodDogbnVtYmVyOyB3aWR0aDogbnVtYmVyIH0+O1xuICBhYnN0cmFjdCBnZXRTY3JvbGxUb3AoKTogbnVtYmVyO1xuICBhYnN0cmFjdCBzY3JvbGxUbyhzY3JvbGxUbzogbnVtYmVyLCBiZWhhdmlvcj86IFNjcm9sbEJlaGF2aW9yKTogdm9pZDtcbiAgYWJzdHJhY3QgZ2V0U2Nyb2xsRWxlbWVudCgpOiBIVE1MRWxlbWVudDtcbiAgYWJzdHJhY3QgbWVhc3VyZU9mZnNldCgpOiBudW1iZXI7XG59XG5cbi8qKiBAaW50ZXJuYWwgKi9cbkBEaXJlY3RpdmUoKVxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFJ4VmlydHVhbFZpZXdSZXBlYXRlcjxcbiAgVCxcbiAgVSBleHRlbmRzIE5nSXRlcmFibGU8VD4gPSBOZ0l0ZXJhYmxlPFQ+LFxuPiB7XG4gIGFic3RyYWN0IHZhbHVlcyQ6IE9ic2VydmFibGU8VSB8IG51bGwgfCB1bmRlZmluZWQ+O1xuICBhYnN0cmFjdCB2aWV3c1JlbmRlcmVkJDogT2JzZXJ2YWJsZTxcbiAgICBFbWJlZGRlZFZpZXdSZWY8UnhWaXJ0dWFsRm9yVmlld0NvbnRleHQ8VCwgVT4+W11cbiAgPjtcbiAgYWJzdHJhY3Qgdmlld1JlbmRlcmVkJDogT2JzZXJ2YWJsZTx7XG4gICAgdmlldzogRW1iZWRkZWRWaWV3UmVmPFJ4VmlydHVhbEZvclZpZXdDb250ZXh0PFQsIFU+PjtcbiAgICBpbmRleDogbnVtYmVyO1xuICAgIGl0ZW06IFQ7XG4gIH0+O1xuICBhYnN0cmFjdCB2aWV3Q29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmO1xuICBhYnN0cmFjdCByZW5kZXJpbmdTdGFydCQ6IE9ic2VydmFibGU8U2V0PG51bWJlcj4+O1xuICBfdHJhY2tCeTogVHJhY2tCeUZ1bmN0aW9uPFQ+IHwgbnVsbDtcbn1cblxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGNsYXNzIFJ4VmlydHVhbEZvclZpZXdDb250ZXh0PFxuICBULFxuICBVIGV4dGVuZHMgTmdJdGVyYWJsZTxUPiA9IE5nSXRlcmFibGU8VD4sXG4gIEMgZXh0ZW5kcyB7IGNvdW50OiBudW1iZXI7IGluZGV4OiBudW1iZXIgfSA9IHsgY291bnQ6IG51bWJlcjsgaW5kZXg6IG51bWJlciB9LFxuICBLID0ga2V5b2YgVCxcbj4gZXh0ZW5kcyBSeERlZmF1bHRMaXN0Vmlld0NvbnRleHQ8VCwgVSwgSz4ge1xuICBjb25zdHJ1Y3RvcihcbiAgICBpdGVtOiBULFxuICAgIHB1YmxpYyByeFZpcnR1YWxGb3JPZjogVSxcbiAgICBjdXN0b21Qcm9wcz86IEMsXG4gICkge1xuICAgIHN1cGVyKGl0ZW0sIGN1c3RvbVByb3BzKTtcbiAgfVxufVxuXG5ARGlyZWN0aXZlKClcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSeFZpcnR1YWxTY3JvbGxFbGVtZW50IHtcbiAgYWJzdHJhY3QgZWxlbWVudFNjcm9sbGVkJDogT2JzZXJ2YWJsZTx2b2lkPjtcbiAgYWJzdHJhY3QgZ2V0RWxlbWVudFJlZigpOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PjtcbiAgYWJzdHJhY3QgbWVhc3VyZU9mZnNldCgpOiBudW1iZXI7XG59XG4iXX0=