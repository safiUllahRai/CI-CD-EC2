import{a as k,b as M}from"./chunk-OF6SPMWR.js";import{a as b}from"./chunk-R7MM33JK.js";import{Aa as s,Ba as A,Ca as d,Fa as C,Ha as h,O as D,P as f,Qa as P,U as x,V as E,Z as T,cb as I,da as n,ea as w,gb as N,la as O,ma as c,oa as y,pa as g,qa as m,ra as u,sa as o,ta as a,ua as S,va as F,wa as _,xa as v}from"./chunk-IKINXWTP.js";var G=e=>["/article",e];function B(e,l){if(e&1&&(o(0,"li",5),s(1),a()),e&2){let t=l.$implicit;n(),d(" ",t," ")}}var q=(()=>{class e{toggleFavorite(t){this.article.favorited=t,t?this.article.favoritesCount++:this.article.favoritesCount--}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=f({type:e,selectors:[["app-article-preview"]],inputs:{article:"article"},standalone:!0,features:[C],decls:14,vars:8,consts:[[1,"article-preview"],[3,"article"],[1,"pull-xs-right",3,"toggle","article"],[1,"preview-link",3,"routerLink"],[1,"tag-list"],[1,"tag-default","tag-pill","tag-outline"]],template:function(r,i){r&1&&(o(0,"div",0)(1,"app-article-meta",1)(2,"app-favorite-button",2),_("toggle",function(R){return i.toggleFavorite(R)}),s(3),a()(),o(4,"a",3)(5,"h1"),s(6),a(),o(7,"p"),s(8),a(),o(9,"span"),s(10,"Read more..."),a(),o(11,"ul",4),m(12,B,2,1,"li",5,g),a()()()),r&2&&(n(),c("article",i.article),n(),c("article",i.article),n(),d(" ",i.article.favoritesCount," "),n(),c("routerLink",h(6,G,i.article.slug)),n(2),A(i.article.title),n(2),A(i.article.description),n(4),u(i.article.tagList))},dependencies:[k,M,I],encapsulation:2})}}return e})();var p=function(e){return e.NOT_LOADED="NOT_LOADED",e.LOADING="LOADING",e.LOADED="LOADED",e}(p||{});var Q=(e,l)=>l.slug,V=e=>({active:e});function j(e,l){e&1&&(o(0,"div",0),s(1,"Loading articles..."),a())}function U(e,l){if(e&1&&S(0,"app-article-preview",1),e&2){let t=l.$implicit;c("article",t)}}function z(e,l){e&1&&(o(0,"div",0),s(1,"No articles are here... yet."),a())}function H(e,l){if(e&1){let t=F();o(0,"li",3)(1,"button",4),_("click",function(){let i=x(t).$implicit,L=v(2);return E(L.setPageTo(i))}),s(2),a()()}if(e&2){let t=l.$implicit,r=v(2);c("ngClass",h(2,V,t===r.currentPage)),n(2),d(" ",t," ")}}function J(e,l){if(e&1&&(m(0,U,1,1,"app-article-preview",1,Q,!1,z,2,0,"div",0),o(3,"nav")(4,"ul",2),m(5,H,3,4,"li",3,g),a()()),e&2){let t=v();u(t.results),n(5),u(t.totalPages)}}var pe=(()=>{class e{set config(t){t&&(this.query=t,this.currentPage=1,this.runQuery())}constructor(t){this.articlesService=t,this.results=[],this.currentPage=1,this.totalPages=[],this.loading=p.NOT_LOADED,this.LoadingState=p,this.destroyRef=D(T)}setPageTo(t){this.currentPage=t,this.runQuery()}runQuery(){this.loading=p.LOADING,this.results=[],this.limit&&(this.query.filters.limit=this.limit,this.query.filters.offset=this.limit*(this.currentPage-1)),this.articlesService.query(this.query).pipe(N(this.destroyRef)).subscribe(t=>{this.loading=p.LOADED,this.results=t.articles,this.totalPages=Array.from(new Array(Math.ceil(t.articlesCount/this.limit)),(r,i)=>i+1)})}static{this.\u0275fac=function(r){return new(r||e)(w(b))}}static{this.\u0275cmp=f({type:e,selectors:[["app-article-list"]],inputs:{limit:"limit",config:"config"},standalone:!0,features:[C],decls:2,vars:2,consts:[[1,"article-preview"],[3,"article"],[1,"pagination"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click"]],template:function(r,i){r&1&&O(0,j,2,0,"div",0)(1,J,7,1,"nav"),r&2&&(y(i.loading===i.LoadingState.LOADING?0:-1),n(),y(i.loading===i.LoadingState.LOADED?1:-1))},dependencies:[q,P],styles:[".page-link[_ngcontent-%COMP%]{cursor:pointer}"]})}}return e})();export{pe as a};
