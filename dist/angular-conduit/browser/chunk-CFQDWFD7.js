import{a as A,b as d,c as I,d as R,e as D,g as c,h as k,j as G,k as L,m as j,n as q}from"./chunk-LIOLKI2G.js";import{$a as N,Aa as l,Ba as C,Ca as F,Fa as _,Ga as f,O as g,P as b,Z as y,bb as T,cb as w,da as i,ea as u,fb as E,gb as x,la as h,ma as a,oa as p,sa as r,ta as o,ua as s,wa as S}from"./chunk-IKINXWTP.js";import"./chunk-2VMXMS7J.js";var M=()=>["/login"],U=()=>["/register"];function V(e,v){e&1&&(r(0,"a",5),l(1,"Have an account?"),o()),e&2&&a("routerLink",f(1,M))}function H(e,v){e&1&&(r(0,"a",5),l(1,"Need an account?"),o()),e&2&&a("routerLink",f(1,U))}function O(e,v){e&1&&s(0,"input",10)}var ee=(()=>{class e{constructor(m,n,t){this.route=m,this.router=n,this.userService=t,this.authType="",this.title="",this.errors={errors:{}},this.isSubmitting=!1,this.destroyRef=g(y),this.authForm=new D({email:new c("",{validators:[d.required],nonNullable:!0}),password:new c("",{validators:[d.required],nonNullable:!0})})}ngOnInit(){this.authType=this.route.snapshot.url.at(-1).path,this.title=this.authType==="login"?"Sign in":"Sign up",this.authType==="register"&&this.authForm.addControl("username",new c("",{validators:[d.required],nonNullable:!0}))}submitForm(){this.isSubmitting=!0,this.errors={errors:{}},(this.authType==="login"?this.userService.login(this.authForm.value):this.userService.register(this.authForm.value)).pipe(x(this.destroyRef)).subscribe({next:()=>void this.router.navigate(["/"]),error:n=>{this.errors=n,this.isSubmitting=!1}})}static{this.\u0275fac=function(n){return new(n||e)(u(N),u(T),u(E))}}static{this.\u0275cmp=b({type:e,selectors:[["app-auth-page"]],standalone:!0,features:[_],decls:20,vars:9,consts:[[1,"auth-page"],[1,"container","page"],[1,"row"],[1,"col-md-6","offset-md-3","col-xs-12"],[1,"text-xs-center"],[3,"routerLink"],[3,"errors"],[3,"ngSubmit","formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","username","placeholder","Username","type","text",1,"form-control","form-control-lg"],["formControlName","email","placeholder","Email","type","text",1,"form-control","form-control-lg"],["formControlName","password","placeholder","Password","type","password",1,"form-control","form-control-lg"],["type","submit",1,"btn","btn-lg","btn-primary","pull-xs-right",3,"disabled"]],template:function(n,t){n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),l(5),o(),r(6,"p",4),h(7,V,2,2,"a",5)(8,H,2,2,"a",5),o(),s(9,"app-list-errors",6),r(10,"form",7),S("ngSubmit",function(){return t.submitForm()}),r(11,"fieldset",8)(12,"fieldset",9),h(13,O,1,0,"input",10),o(),r(14,"fieldset",9),s(15,"input",11),o(),r(16,"fieldset",9),s(17,"input",12),o(),r(18,"button",13),l(19),o()()()()()()()),n&2&&(i(5),C(t.title),i(2),p(t.authType==="register"?7:-1),i(),p(t.authType==="login"?8:-1),i(),a("errors",t.errors),i(),a("formGroup",t.authForm),i(),a("disabled",t.isSubmitting),i(2),p(t.authType==="register"?13:-1),i(5),a("disabled",!t.authForm.valid),i(),F(" ",t.title," "))},dependencies:[w,q,j,k,A,I,R,G,L],encapsulation:2})}}return e})();export{ee as default};
